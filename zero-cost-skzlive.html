<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>如何参与樱坂46现场演出门票FanClub抽选？</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <style>
    /* 页面主内容 */
    .main-content {
      padding-top: 2500px; /* 顶部间距，避开导航栏 */
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    /* 卡片样式 */
    .card {
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      max-width: 800px;
      width: 100%;
      padding: 20px;
    }

    /* Markdown 内容样式 */
    .markdown-content {
      line-height: 1.6;
      color: #333;
    }

    .markdown-content h1, .markdown-content h2, .markdown-content h3 {
      margin-top: 20px;
      margin-bottom: 10px;
      color: #444;
    }
    .markdown-content p {
      margin: 10px 0;
    }
    .markdown-content a {
      color: #007BFF;
      text-decoration: none;
    }
    .markdown-content a:hover {
      text-decoration: underline;
    }
    .markdown-content code {
      background-color: #f7f7f9;
      padding: 2px 4px;
      border-radius: 4px;
      font-family: monospace;
      color: #d6336c;
    }
    .markdown-content pre {
      background-color: #f7f7f9;
      padding: 10px;
      border-radius: 5px;
      overflow-x: auto;
      font-family: monospace;
      color: #333;
    }
    .markdown-content ul {
      margin: 10px 0;
      padding-left: 20px;
    }
    .markdown-content li {
      margin: 5px 0;
    }

        /* 目录样式 */
        .toc {
  position: fixed;
  top: 80px; /* 导航栏高度 */
  left: 0;
  width: 250px;
  height: calc(100vh - 80px); /* 确保目录不会超出页面高度 */
  background-color: #f4f4f9;
  border-right: 1px solid #ccc;
  padding: 20px;
  box-sizing: border-box;
  overflow-y: auto;
  transition: transform 0.3s ease; /* 平滑关闭效果 */
}

    /* 隐藏目录 */
    .toc.hidden {
      transform: translateX(-100%); /* 将目录移出屏幕 */
    }
    .toc h2 {
      font-size: 18px;
      margin-bottom: 10px;
    }

    .toc ul {
      list-style: none;
      padding-left: 0;
    }

    .toc li {
      margin-bottom: 5px;
    }

    .toc a {
      text-decoration: none;
      color: #007BFF;
      font-size: 14px;
      padding-left: 10px;
    }

    .toc a:hover {
      text-decoration: underline;
    }

        /* 响应式布局 */
        @media screen and (max-width: 768px) {
      .toc {
        transform: translateX(-100%); /* 默认隐藏目录 */
      }
      .content {
        margin-left: 0; /* 内容占满屏幕 */
      }
    }


  </style>

</head>
<body>

  <nav class="navbar">
    <div class="nav-container">
        <!--
        <a class="nav-logo">幕前须知 KAGENARE</a>
        -->
        <div class="hamburger">
            <div></div>
            <div></div>
            <div></div>
        </div>
        <ul class="nav-menu">
          <li><a href="index.html">首页</a></li>
          <li><a href="zero-cost-skzlive.html">如何参与樱坂46现场演出门票FanClub抽选？</a></li>
        </ul>
    </div>
</nav>

<div class="toc">
    <h2>目录</h2>
    <ul id="toc-list">
      <!-- 动态生成的目录将插入到这里 -->
    </ul>
  </div>


<div class="main-content">
<div class="card">
    <div class="markdown-content">
    <div id="markdown-content"></div>
    </div>
</div>
</div>
  <!-- 添加 Markdown 渲染器 -->
    <script>

    // 加载 Markdown 文件并渲染内容
    async function loadMarkdownFile() {
      try {
        // 1. 加载 Markdown 文件
        const response = await fetch('how-to-buy-sakurazaka46-tickets.md'); // 替换为你的 Markdown 文件路径
        const markdownText = await response.text();

        // 2. 使用 marked.js 渲染 Markdown 为 HTML
        const markdownContent = document.getElementById('markdown-content');
        markdownContent.innerHTML = marked.parse(markdownText);

        // 3. 生成目录
        generateTOC();
      } catch (error) {
        console.error('无法加载 Markdown 文件:', error);
      }
    }

    // 生成目录
    function generateTOC() {
      const markdownContent = document.getElementById('markdown-content');
      const tocList = document.getElementById('toc-list');

      // 查找所有标题元素（h1, h2, h3, ...）
      const headers = markdownContent.querySelectorAll('h1, h2, h3, h4, h5, h6');

      headers.forEach((header, index) => {
        // 1. 创建唯一的 ID
        const id = `header-${index}`;
        header.id = id;

        // 2. 创建目录项
        const li = document.createElement('li');
        li.style.marginLeft = `${(parseInt(header.tagName.substring(1)) - 1) * 10}px`; // 根据标题级别缩进

        const a = document.createElement('a');
        a.href = `#${id}`;
        a.textContent = header.textContent;

        li.appendChild(a);
        tocList.appendChild(li);
      });

      // 添加平滑滚动效果
      enableSmoothScroll();
    }

    // 平滑滚动功能
    function enableSmoothScroll() {
      document.querySelectorAll('.toc a').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const targetId = this.getAttribute('href').substring(1);
          const target = document.getElementById(targetId);

          if (target) {
            window.scrollTo({
              top: target.offsetTop - 20, // 调整偏移量以适配固定导航栏
              behavior: 'smooth'
            });
          }
        });
      });
    }

        // 目录展开/收起逻辑
        const toc = document.getElementById('toc');
    const toggleTocButton = document.getElementById('toggle-toc');
    const content = document.querySelector('.content');

    toggleTocButton.addEventListener('click', () => {
      const isHidden = toc.classList.contains('hidden');
      if (isHidden) {
        toc.classList.remove('hidden');
        content.classList.remove('full-width');
      } else {
        toc.classList.add('hidden');
        content.classList.add('full-width');
      }
    });
    // 页面加载时执行
    loadMarkdownFile();   
    </script>
</body>
</html>